<robot xmlns:xacro="http://www.ros.org/wiki/xacro">

  <xacro:macro name="gps_block" params="prefix robot_namespace:=''">

    <link name="${prefix}gps_link"/>

    <joint name="${prefix}gps_to_chassis" type="fixed">
      <parent link="${prefix}chassis_link"/>
      <child link="${prefix}gps_link"/>
      <origin xyz="-0.10 0.05 0.135" rpy="0 0 0"/>
    </joint>

    <gazebo reference="${prefix}gps_link">
      <sensor name="${prefix}gps" type="navsat">
        <always_on>true</always_on>
        <update_rate>1</update_rate>
        <visualize>true</visualize>
        <topic>/${robot_namespace}/fix</topic>
        <enable_metrics>true</enable_metrics>
        <gz_frame_id>${prefix}gps_link</gz_frame_id>
        <plugin filename="gz-sim-navsat-system"
                name="gz::sim::systems::NavSat"/>
      </sensor>
    </gazebo>

  </xacro:macro>

</robot>